# –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å (–∫–∞–∫ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏)

**–û–±—ä—è—Å–Ω–∏, —á—Ç–æ —Ç–∞–∫–æ–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏ –∑–∞—á–µ–º –æ–Ω–∞ –Ω—É–∂–Ω–∞. –ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç ACID‚Äë—Å–≤–æ–π—Å—Ç–≤–∞?**

–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–ª–∏ –Ω–µ–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–æ–≤—Å–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –º–µ—à–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥—É –æ—Å—Ç–∞–ª—å–Ω–æ–µ —è –Ω–µ –ø–æ–º–Ω—é

–ï–≥–æ—Ä, –æ—Ç–ª–∏—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞. –¢—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å–ø–æ–º–Ω–∏–ª **–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å** –∏ –∏–¥–µ—é, —á—Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ª–∏–±–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é, –ª–∏–±–æ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è. –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —Ç–µ–º—É —Ç–∞–∫, —á—Ç–æ–±—ã —Ç—ã –º–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ Middle/Senior ‚Äî —á—ë—Ç–∫–æ, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–æ –∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏.

# üü¶ –ß—Ç–æ —Ç–∞–∫–æ–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è

> **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è ‚Äî —ç—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∞ –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∫–∞–∫ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ.**

–ï—Å–ª–∏ –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å ‚Äî –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤—Å–µ.

–ü—Ä–∏–º–µ—Ä: –ø–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏

1. —Å–ø–∏—Å–∞—Ç—å —Å–æ —Å—á—ë—Ç–∞ A
    
2. –∑–∞—á–∏—Å–ª–∏—Ç—å –Ω–∞ —Å—á—ë—Ç B
    

–ï—Å–ª–∏ –≤—Ç–æ—Ä–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å ‚Äî –ø–µ—Ä–≤–æ–µ —Ç–æ–∂–µ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è.

# üü© –ó–∞—á–µ–º –Ω—É–∂–Ω—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

- –∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    
- –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
    
- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ —Å–±–æ—è—Ö
    
- –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    

# üü¶ ACID ‚Äî —á–µ—Ç—ã—Ä–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

–≠—Ç–æ —Ç–æ, —á—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è—Ö.

## üü© A ‚Äî Atomicity (–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å)

–¢—ã —Å–∫–∞–∑–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

> —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ª–∏–±–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é, –ª–∏–±–æ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–æ–≤—Å–µ.

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Äî –æ—Ç–∫–∞—Ç (`ROLLBACK`).

## üü© C ‚Äî Consistency (—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)

–ü–æ—Å–ª–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å‚Äë–ø—Ä–∞–≤–∏–ª –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π:

- –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏
    
- —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏
    
- CHECK‚Äë–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
    
- –¥–æ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
    

–ü—Ä–∏–º–µ—Ä: –Ω–µ–ª—å–∑—è —Å–ø–∏—Å–∞—Ç—å –¥–µ–Ω—å–≥–∏ —Ç–∞–∫, —á—Ç–æ–±—ã –±–∞–ª–∞–Ω—Å —Å—Ç–∞–ª –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º, –µ—Å–ª–∏ —ç—Ç–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ.

## üü© I ‚Äî Isolation (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)

–¢—ã —Ç–æ–∂–µ —É–ø–æ–º—è–Ω—É–ª –∏–¥–µ—é:

> –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –º–µ—à–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥—É.

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–∫, –±—É–¥—Ç–æ –æ–Ω–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è.

–£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ –º—ã —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ–∑–∂–µ.

## üü© D ‚Äî Durability (–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å)

–ü–æ—Å–ª–µ `COMMIT` –¥–∞–Ω–Ω—ã–µ **–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è**, –¥–∞–∂–µ –µ—Å–ª–∏:

- –æ—Ç–∫–ª—é—á–∏–ª–∏ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ
    
- —É–ø–∞–ª —Å–µ—Ä–≤–µ—Ä
    
- –ø—Ä–æ–∏–∑–æ—à—ë–ª —Å–±–æ–π
    

–ë–∞–∑–∞ –ø–∏—à–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫ –∏–ª–∏ –≤ –∂—É—Ä–Ω–∞–ª.

# üüß –ö–æ—Ä–æ—Ç–∫–∞—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è

> –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–π, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –∫–∞–∫ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ. ACID: A ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å, C ‚Äî —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å, I ‚Äî –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å, D ‚Äî –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å.

# ‚ùì –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å (–∫–∞–∫ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏)

**–ü–µ—Ä–µ—á–∏—Å–ª–∏ —É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –æ–±—ä—è—Å–Ω–∏, –∫–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ–Ω–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç:** **dirty read, non‚Äërepeatable read, phantom read.**

—É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ read commetted repeteble read —Ä–µ—à–∞—é—Ç –≤–æ–ø—Ä–æ—Å—ã —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º —á—Ç–µ–Ω–∏–µ–º

–ï–≥–æ—Ä, —Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å–ø–æ–º–Ω–∏–ª –¥–≤–∞ —É—Ä–æ–≤–Ω—è, –Ω–æ —Å–µ–π—á–∞—Å –æ—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π –∏ –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Ç–æ, —á—Ç–æ –æ–±—ã—á–Ω–æ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏. –î–∞–≤–∞–π —Ä–∞–∑–ª–æ–∂–∏–º –≤—Å—ë —Ç–∞–∫, —á—Ç–æ–±—ã —Ç—ã –º–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ –æ—Ç–≤–µ—á–∞—Ç—å –∫–∞–∫ Middle/Senior.

# üü¶ –ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±—ã–≤–∞—é—Ç –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö

–ü–µ—Ä–µ–¥ —É—Ä–æ–≤–Ω—è–º–∏ –∏–∑–æ–ª—è—Ü–∏–∏ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å **–∫–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ–Ω–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç**.

## 1) **Dirty Read** ‚Äî –≥—Ä—è–∑–Ω–æ–µ —á—Ç–µ–Ω–∏–µ

–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è **–µ—â—ë –Ω–µ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª–∞**.

–ï—Å–ª–∏ —Ç–∞ –æ—Ç–∫–∞—Ç–∏—Ç—Å—è ‚Äî —Ç—ã –ø—Ä–æ—á–∏—Ç–∞–ª –º—É—Å–æ—Ä.

## 2) **Non‚Äërepeatable Read** ‚Äî –Ω–µ–ø–æ–≤—Ç–æ—Ä—è–µ–º–æ–µ —á—Ç–µ–Ω–∏–µ

–í –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–≤–∞ —Ä–∞–∑–∞ —á–∏—Ç–∞–µ—à—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Å—Ç—Ä–æ–∫—É ‚Äî –∏ –ø–æ–ª—É—á–∞–µ—à—å **—Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è**, –ø–æ—Ç–æ–º—É —á—Ç–æ –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏–∑–º–µ–Ω–∏–ª–∞ –∏ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª–∞ –µ—ë.

## 3) **Phantom Read** ‚Äî —Ñ–∞–Ω—Ç–æ–º–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏

–í –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–≤–∞ —Ä–∞–∑–∞ –¥–µ–ª–∞–µ—à—å –∑–∞–ø—Ä–æ—Å –ø–æ —É—Å–ª–æ–≤–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `WHERE age > 18`) ‚Äî –∏ –ø–æ–ª—É—á–∞–µ—à—å **—Ä–∞–∑–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫**, –ø–æ—Ç–æ–º—É —á—Ç–æ –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–æ–±–∞–≤–∏–ª–∞ –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏, –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø–æ–¥ —É—Å–ª–æ–≤–∏–µ.

# üü© –£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (–æ—Ç —Å–ª–∞–±–æ–≥–æ –∫ —Å–∏–ª—å–Ω–æ–º—É)

–¢–µ–ø–µ—Ä—å —Ä–∞–∑–±–µ—Ä—ë–º —É—Ä–æ–≤–Ω–∏ –∏ –∫–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ–Ω–∏ —Ä–µ—à–∞—é—Ç.

## üü¶ 1. **READ UNCOMMITTED**

–°–∞–º—ã–π —Å–ª–∞–±—ã–π —É—Ä–æ–≤–µ–Ω—å.

- –¥–æ–ø—É—Å–∫–∞–µ—Ç dirty read
    
- –¥–æ–ø—É—Å–∫–∞–µ—Ç non‚Äërepeatable read
    
- –¥–æ–ø—É—Å–∫–∞–µ—Ç phantom read
    

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

## üü¶ 2. **READ COMMITTED**

–≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –≤ PostgreSQL, Oracle.

- **–Ω–µ—Ç dirty read**
    
- –Ω–æ –µ—Å—Ç—å non‚Äërepeatable read
    
- –∏ –µ—Å—Ç—å phantom read
    

–¢–æ –µ—Å—Ç—å —Ç—ã –Ω–µ —É–≤–∏–¥–∏—à—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–æ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –º–µ–∂–¥—É –¥–≤—É–º—è —á—Ç–µ–Ω–∏—è–º–∏.

## üü¶ 3. **REPEATABLE READ**

–°—Ç–∞–Ω–¥–∞—Ä—Ç –≤ MySQL (InnoDB).

- **–Ω–µ—Ç dirty read**
    
- **–Ω–µ—Ç non‚Äërepeatable read**
    
- –Ω–æ **phantom read –≤–æ–∑–º–æ–∂–µ–Ω** (–≤ MySQL ‚Äî –Ω–µ—Ç, –Ω–æ –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É ‚Äî –¥–∞)
    

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç: –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Å—Ç—Ä–æ–∫—É —Ç—ã —É–≤–∏–¥–∏—à—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

## üü¶ 4. **SERIALIZABLE**

–°–∞–º—ã–π —Å—Ç—Ä–æ–≥–∏–π —É—Ä–æ–≤–µ–Ω—å.

- –Ω–µ—Ç dirty read
    
- –Ω–µ—Ç non‚Äërepeatable read
    
- –Ω–µ—Ç phantom read
    

–†–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫, –±—É–¥—Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **—Å—Ç—Ä–æ–≥–æ –ø–æ –æ—á–µ—Ä–µ–¥–∏**, –∞ –Ω–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.

–ú–∏–Ω—É—Å ‚Äî –º–æ–∂–µ—Ç —Å–∏–ª—å–Ω–æ —Å–Ω–∏–∂–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

# üüß –ö–æ—Ä–æ—Ç–∫–∞—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è

> READ COMMITTED –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –≥—Ä—è–∑–Ω—ã—Ö —á—Ç–µ–Ω–∏–π. REPEATABLE READ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –≥—Ä—è–∑–Ω—ã—Ö –∏ –Ω–µ–ø–æ–≤—Ç–æ—Ä—è–µ–º—ã—Ö —á—Ç–µ–Ω–∏–π. SERIALIZABLE –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º, –≤–∫–ª—é—á–∞—è —Ñ–∞–Ω—Ç–æ–º—ã.

# ‚ùì –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å (–∫–∞–∫ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏)

**–û–±—ä—è—Å–Ω–∏ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É COMMIT, ROLLBACK –∏ SAVEPOINT. –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–π?**

commit —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–Ω–µ –¥–∞–Ω–Ω—ã—Ö –≤ –±–¥ rollback –æ—Ç–∫–∞—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö savepoit —Ç–æ—á–∫–∞ –∫ –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫

–¢—ã —Å—Ö–≤–∞—Ç–∏–ª —Å—É—Ç—å, –ï–≥–æ—Ä. –î–∞–≤–∞–π —É—Å–∏–ª–∏–º –æ—Ç–≤–µ—Ç —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –∑–≤—É—á–∞–ª –∫–∞–∫ —É —É–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ Middle/Senior. –°–µ–π—á–∞—Å —É —Ç–µ–±—è –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ —Å–ª–∏—à–∫–æ–º –∫—Ä–∞—Ç–∫–æ ‚Äî –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏ –∂–¥—É—Ç —á—É—Ç—å –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è.

–†–∞–∑–±–µ—Ä—ë–º –∫–∞–∂–¥—É—é –∫–æ–º–∞–Ω–¥—É —á—ë—Ç–∫–æ –∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏.

# üü© COMMIT ‚Äî —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

> **COMMIT —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å–¥–µ–ª–∞–Ω–Ω—ã–µ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∏ –¥–µ–ª–∞–µ—Ç –∏—Ö –≤–∏–¥–∏–º—ã–º–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.**

–ü–æ—Å–ª–µ COMMIT:

- –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å–∞–Ω—ã –≤ –∂—É—Ä–Ω–∞–ª/–Ω–∞ –¥–∏—Å–∫,
    
- –æ—Ç–∫–∞—Ç–∏—Ç—å –∏—Ö —É–∂–µ –Ω–µ–ª—å–∑—è,
    
- —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π.
    

–ü—Ä–∏–º–µ—Ä:

sql

```
BEGIN;
UPDATE accounts SET balance = balance - 100 WHERE id = 1;
UPDATE accounts SET balance = balance + 100 WHERE id = 2;
COMMIT;
```

# üü© ROLLBACK ‚Äî –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

> **ROLLBACK –æ—Ç–º–µ–Ω—è–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å–¥–µ–ª–∞–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∞–∑—É –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ –Ω–∞—á–∞–ª–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.**

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö:

- –Ω–∞—Ä—É—à–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π,
    
- –±–∏–∑–Ω–µ—Å‚Äë–æ—à–∏–±–∫–∞,
    
- –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
    

–ü—Ä–∏–º–µ—Ä:

sql

```
BEGIN;
UPDATE accounts SET balance = balance - 100 WHERE id = 1;
-- –æ—à–∏–±–∫–∞
ROLLBACK;
```

# üü© SAVEPOINT ‚Äî —Ç–æ—á–∫–∞ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞

–¢—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–∞–∑–∞–ª: —ç—Ç–æ —Ç–æ—á–∫–∞, –∫ –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è.

> **SAVEPOINT —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é —Ç–æ—á–∫—É –≤–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –æ—Ç–∫–∞—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π, –Ω–µ –æ—Ç–∫–∞—Ç—ã–≤–∞—è –≤—Å—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é.**

–ü—Ä–∏–º–µ—Ä:

sql

```
BEGIN;

UPDATE accounts SET balance = balance - 100 WHERE id = 1;
SAVEPOINT sp1;

UPDATE accounts SET balance = balance + 100 WHERE id = 2;
-- –æ—à–∏–±–∫–∞
ROLLBACK TO sp1;

COMMIT;
```

–ó–¥–µ—Å—å:

- –ø–µ—Ä–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è,
    
- –≤—Ç–æ—Ä–∞—è –æ—Ç–∫–∞—Ç–∏—Ç—Å—è.
    

# üüß –ö–æ—Ä–æ—Ç–∫–∞—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è

> COMMIT —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è. ROLLBACK –æ—Ç–º–µ–Ω—è–µ—Ç –≤—Å—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é. SAVEPOINT –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–∫–∞—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

# ‚ùì –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å (–∫–∞–∫ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏)

**–û–±—ä—è—Å–Ω–∏, —á—Ç–æ —Ç–∞–∫–æ–µ dirty read, non‚Äërepeatable read –∏ phantom read. –ü—Ä–∏–≤–µ–¥–∏ –ø—Ä–∏–º–µ—Ä—ã.**

phantom read –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ —Ç–∞–∫ –∫–∞–∫ –∏—Ö —É–¥–∞–ª–∏–ª–∞ –∏–ª–∏ –¥–æ–±–∞–≤–∏–ª–∞ –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è dirty read —á—Ç–µ–Ω–∏–µ –Ω–µ–∑–∞–∫–æ–º–∏—á–∏–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ç–æ –µ—Å—Ç—å –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –æ—à–∏–±–∫–∞ —Ç–æ —Ç—ã –ø—Ä–æ—á—ë–ª –º—É—Å–æ—Ä non repetable read —Ç—ã —á–∏—Ç–∞–µ—à—å –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ –Ω–æ –ø–æ–ª—É—á–∞–µ—à—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–∞–∫ –∫–∞–∫ –∏—Ö –∏–∑–º–µ–Ω–∏–ª–∞ –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è

–û—Ç–ª–∏—á–Ω–æ, –ï–≥–æ—Ä. –¢—ã –æ—á–µ–Ω—å —Ç–æ—á–Ω–æ –æ–ø–∏—Å–∞–ª —Å—É—Ç—å –≤—Å–µ—Ö —Ç—Ä—ë—Ö –ø—Ä–æ–±–ª–µ–º. –î–∞–≤–∞–π —É—Å–∏–ª–∏–º –æ—Ç–≤–µ—Ç —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –∑–≤—É—á–∞–ª –∫–∞–∫ —É —É–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ Middle/Senior ‚Äî —Å —á—ë—Ç–∫–∏–º–∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞–º–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ª—é–±—è—Ç –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è—Ö.

# üü© Dirty Read (–≥—Ä—è–∑–Ω–æ–µ —á—Ç–µ–Ω–∏–µ)

–¢—ã —Å–∫–∞–∑–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

> —á—Ç–µ–Ω–∏–µ –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚Äî –µ—Å–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—Ç–∏—Ç—Å—è, —Ç—ã –ø—Ä–æ—á–∏—Ç–∞–ª –º—É—Å–æ—Ä.

### –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ —É—Ä–æ–≤–Ω—è Middle/Senior:

**Dirty read ‚Äî —ç—Ç–æ —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ –æ–¥–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –µ—â—ë –Ω–µ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª–∞. –ï—Å–ª–∏ —Ç–∞ –æ—Ç–∫–∞—Ç–∏—Ç—Å—è, –ø–µ—Ä–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ.**

### –ü—Ä–∏–º–µ—Ä:

- T1: `UPDATE accounts SET balance = 0 WHERE id = 1;` (–µ—â—ë –Ω–µ commit)
    
- T2: —á–∏—Ç–∞–µ—Ç `balance = 0`
    
- T1: `ROLLBACK`
    
- T2 —Ä–∞–±–æ—Ç–∞–ª–∞ —Å –¥–∞–Ω–Ω—ã–º–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ
    

# üü© Non‚Äërepeatable Read (–Ω–µ–ø–æ–≤—Ç–æ—Ä—è–µ–º–æ–µ —á—Ç–µ–Ω–∏–µ)

–¢—ã —Ç–æ–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–∞–∑–∞–ª:

> —á–∏—Ç–∞–µ—à—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Å—Ç—Ä–æ–∫—É –¥–≤–∞ —Ä–∞–∑–∞ ‚Äî –ø–æ–ª—É—á–∞–µ—à—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

### –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ —É—Ä–æ–≤–Ω—è Middle/Senior:

**Non‚Äërepeatable read ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–≤–∞–∂–¥—ã —á–∏—Ç–∞–µ—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Å—Ç—Ä–æ–∫—É, –Ω–æ –º–µ–∂–¥—É —á—Ç–µ–Ω–∏—è–º–∏ –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏–∑–º–µ–Ω–∏–ª–∞ –∏ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª–∞ –µ—ë.**

### –ü—Ä–∏–º–µ—Ä:

- T1: `SELECT balance FROM accounts WHERE id = 1` ‚Üí 100
    
- T2: `UPDATE accounts SET balance = 200 WHERE id = 1; COMMIT;`
    
- T1: —Å–Ω–æ–≤–∞ `SELECT balance FROM accounts WHERE id = 1` ‚Üí 200
    

–°—Ç—Ä–æ–∫–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å.

# üü© Phantom Read (—Ñ–∞–Ω—Ç–æ–º–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏)

–¢—ã –æ–ø–∏—Å–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

> –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–æ–±–∞–≤–∏–ª–∞ –∏–ª–∏ —É–¥–∞–ª–∏–ª–∞ —Å—Ç—Ä–æ–∫–∏, –∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –∏—Ö —Å—Ç–∞–ª–æ –±–æ–ª—å—à–µ/–º–µ–Ω—å—à–µ.

### –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ —É—Ä–æ–≤–Ω—è Middle/Senior:

**Phantom read ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–≤–∞–∂–¥—ã –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∑–∞–ø—Ä–æ—Å –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É —Å—Ç—Ä–æ–∫, –Ω–æ –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–æ–±–∞–≤–∏–ª–∞ –∏–ª–∏ —É–¥–∞–ª–∏–ª–∞ —Å—Ç—Ä–æ–∫–∏, –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø–æ–¥ —É—Å–ª–æ–≤–∏–µ.**

### –ü—Ä–∏–º–µ—Ä:

- T1: `SELECT * FROM orders WHERE amount > 100` ‚Üí 5 —Å—Ç—Ä–æ–∫
    
- T2: `INSERT INTO orders(amount) VALUES (150); COMMIT;`
    
- T1: —Å–Ω–æ–≤–∞ `SELECT * FROM orders WHERE amount > 100` ‚Üí 6 —Å—Ç—Ä–æ–∫
    

–ü–æ—è–≤–∏–ª–∞—Å—å ¬´—Ñ–∞–Ω—Ç–æ–º–Ω–∞—è¬ª —Å—Ç—Ä–æ–∫–∞.

# üüß –ö–æ—Ä–æ—Ç–∫–∞—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è

> **Dirty read** ‚Äî —á—Ç–µ–Ω–∏–µ –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. **Non‚Äërepeatable read** ‚Äî –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ —Å—Ç—Ä–æ–∫–∞ —á–∏—Ç–∞–µ—Ç—Å—è –ø–æ‚Äë—Ä–∞–∑–Ω–æ–º—É. **Phantom read** ‚Äî –º–µ–Ω—è–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫, –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥ —É—Å–ª–æ–≤–∏–µ.
