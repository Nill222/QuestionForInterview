## 70. –ü—Ä–æ—Ü–µ—Å—Å –∏ –ø–æ—Ç–æ–∫. –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ç–æ–∫–∞

- **–ü—Ä–æ—Ü–µ—Å—Å** ‚Äî —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π—Å—è –≤ –û–°. –ò–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∞–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, —Ä–µ—Å—É—Ä—Å—ã (–ø–∞–º—è—Ç—å, –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã).
    
- **–ü–æ—Ç–æ–∫ (Thread)** ‚Äî –µ–¥–∏–Ω–∏—Ü–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞. –ü–æ—Ç–æ–∫–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–µ–ª—è—Ç –ø–∞–º—è—Ç—å –∏ —Ä–µ—Å—É—Ä—Å—ã.
    

**–°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ç–æ–∫–∞ (**`Thread.State`**):**

- `NEW` ‚Äî —Å–æ–∑–¥–∞–Ω, –Ω–æ –Ω–µ –∑–∞–ø—É—â–µ–Ω (`new Thread(...)`).
    
- `RUNNABLE` ‚Äî –≥–æ—Ç–æ–≤ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é, –æ–∂–∏–¥–∞–µ—Ç CPU.
    
- `RUNNING` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è (–≤ JVM –Ω–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —ç—Ç–æ —á–∞—Å—Ç—å `RUNNABLE`).
    
- `BLOCKED` ‚Äî –æ–∂–∏–¥–∞–µ—Ç –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∞.
    
- `WAITING` ‚Äî –æ–∂–∏–¥–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (`wait()`).
    
- `TIMED_WAITING` ‚Äî –æ–∂–∏–¥–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è (`sleep(ms)`, `wait(ms)`).
    
- `TERMINATED` ‚Äî –∑–∞–≤–µ—Ä—à—ë–Ω.
    

## 71. –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–æ—Ç–æ–∫? –°–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞

- **–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç** `Thread`**:**
    
    java
    
    ```
    class MyThread extends Thread {
        public void run() { System.out.println("Hello"); }
    }
    new MyThread().start();
    ```
    
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è** `Runnable`**:**
    
    java
    
    ```
    Runnable task = () -> System.out.println("Hello");
    new Thread(task).start();
    ```
    
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** `Callable` **+** `FutureTask`**:**
    
    java
    
    ```
    Callable<Integer> c = () -> 42;
    FutureTask<Integer> f = new FutureTask<>(c);
    new Thread(f).start();
    ```
    
- **–ß–µ—Ä–µ–∑** `ExecutorService`**:**
    
    java
    
    ```
    ExecutorService pool = Executors.newFixedThreadPool(2);
    pool.submit(() -> System.out.println("Hello"));
    ```
    

## 72. –ö–∞–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ—Ç–æ–∫

- **–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** `Thread.stop()` ‚Äî —É—Å—Ç–∞—Ä–µ–ª –∏ –Ω–µ–±–µ–∑–æ–ø–∞—Å–µ–Ω.
    
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã:
    
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ñ–ª–∞–≥**:
        
        java
        
        ```
        class Worker implements Runnable {
            private volatile boolean running = true;
            public void run() {
                while (running) { /* —Ä–∞–±–æ—Ç–∞ */ }
            }
            public void stop() { running = false; }
        }
        ```
        
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **interrupt**:
        
        java
        
        ```
        Thread t = new Thread(() -> {
            while (!Thread.currentThread().isInterrupted()) {
                // —Ä–∞–±–æ—Ç–∞
            }
        });
        t.start();
        t.interrupt();
        ```
        
    - –î–ª—è `ExecutorService`: `shutdown()` –∏–ª–∏ `shutdownNow()`.
        

## 73. –ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ

- –û–±–µ—Ä–Ω—É—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ `Runnable` –∏–ª–∏ `Callable` –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ `Thread` –∏–ª–∏ `ExecutorService`.
    
    java
    
    ```
    new Thread(() -> {
        step1();
        step2();
        step3();
    }).start();
    ```
    

## 74. –ú–µ—Ç–æ–¥—ã `wait()` –∏ `notify()/notifyAll()`

- `wait()` ‚Äî –ø–æ—Ç–æ–∫ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è.
    
- `notify()` ‚Äî –ø—Ä–æ–±—É–∂–¥–∞–µ—Ç –æ–¥–∏–Ω –ø–æ—Ç–æ–∫, –æ–∂–∏–¥–∞—é—â–∏–π –Ω–∞ —ç—Ç–æ–º –º–æ–Ω–∏—Ç–æ—Ä–µ.
    
- `notifyAll()` ‚Äî –ø—Ä–æ–±—É–∂–¥–∞–µ—Ç –≤—Å–µ –æ–∂–∏–¥–∞—é—â–∏–µ –ø–æ—Ç–æ–∫–∏.
    
- –†–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞ (`synchronized`).
    
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤ (Producer‚ÄìConsumer).
    

## 75. –û—Ç–ª–∏—á–∏–µ `wait()` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –∏ –±–µ–∑

- `wait()` **–±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞** ‚Äî –ø–æ—Ç–æ–∫ –∂–¥—ë—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω `notify()`/`notifyAll()`.
    
- `wait(long timeout)` ‚Äî –ø–æ—Ç–æ–∫ –∂–¥—ë—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è, –∑–∞—Ç–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–∂–∏–¥–∞–Ω–∏—è, –¥–∞–∂–µ –µ—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –±—ã–ª–æ.
    
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–∞–π–º–∞—É—Ç–æ–≤ –∏ –∏–∑–±–µ–∂–∞–Ω–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –∑–∞–≤–∏—Å–∞–Ω–∏—è.
    

## 76. –ú–µ—Ç–æ–¥ `yield()` –∏ –æ—Ç–ª–∏—á–∏–µ –æ—Ç `sleep()`

- `Thread.yield()`
    
    - –ü–æ—Ç–æ–∫ –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω–æ —É—Å—Ç—É–ø–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–∞–º —Ç–æ–≥–æ –∂–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞.
        
    - –ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ–Ω —Å—Ä–∞–∑—É –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.
        
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏.
        
- `Thread.sleep(ms)`
    
    - –ü—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ—Ç–æ–∫ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.
        
    - –ü–æ—Ç–æ–∫ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `TIMED_WAITING`.
        
    - –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–∞—É–∑–∞, –Ω–æ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –û–°).
        

**–†–∞–∑–Ω–∏—Ü–∞:**

- `sleep()` ‚Äî —Ä–µ–∞–ª—å–Ω–∞—è –ø–∞—É–∑–∞.
    
- `yield()` ‚Äî –Ω–∞–º—ë–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫—É: "–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç".
    

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞

| –í–æ–ø—Ä–æ—Å                | –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç                                                               |
| --------------------- | --------------------------------------------------------------------------- |
| –ü—Ä–æ—Ü–µ—Å—Å vs –ø–æ—Ç–æ–∫      | –ü—Ä–æ—Ü–µ—Å—Å ‚Äî –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏; –ø–æ—Ç–æ–∫ ‚Äî –µ–¥–∏–Ω–∏—Ü–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ |
| –°–æ—Å—Ç–æ—è–Ω–∏—è             | NEW, RUNNABLE, BLOCKED, WAITING, TIMED_WAITING, TERMINATED                  |
| –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞       | –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ `Thread`, `Runnable`, `Callable`, `ExecutorService`            |
| –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ            | –§–ª–∞–≥, `interrupt`, `shutdown()`                                             |
| –ù–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥          | –í `Runnable`/`Callable`, –∑–∞–ø—É—Å–∫ –≤ `Thread`                                  |
| wait/notify           | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤, —Ä–∞–±–æ—Ç–∞—é—Ç –≤ synchronized                                |
| wait vs wait(timeout) | –ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ vs –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ                                        |
| yield vs sleep        | yield ‚Äî —É—Å—Ç—É–ø–∏—Ç—å CPU, sleep ‚Äî –ø–∞—É–∑–∞                                         |
## 77. –û—Ç–ª–∏—á–∏–µ `sleep()` –∏ `wait(long millis)`

- `Thread.sleep(long millis)`
    
    - –ü—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.
        
    - –ü–æ—Ç–æ–∫ –æ—Å—Ç–∞—ë—Ç—Å—è **–≤–ª–∞–¥–µ–ª—å—Ü–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∞**, –µ—Å–ª–∏ –æ–Ω –±—ã–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω.
        
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞—É–∑—ã.
        
- `Object.wait(long millis)`
    
    - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ–±—ä–µ–∫—Ç–µ –≤–Ω—É—Ç—Ä–∏ `synchronized` –±–ª–æ–∫–∞.
        
    - –ü–æ—Ç–æ–∫ **–æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä** –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è.
        
    - –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±—É–∂–¥—ë–Ω —á–µ—Ä–µ–∑ `notify()`/`notifyAll()` –∏–ª–∏ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏.
        
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–µ–∂–ø–æ—Ç–æ—á–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏.
        

üëâ –ì–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ: `sleep()` ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–∞—É–∑–∞, `wait()` ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∞.

## 78. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ—Ç–æ–¥ `join()`

- `thread.join()` –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞.
    
- –ü—Ä–∏–º–µ—Ä:
    
    java
    
    ```
    Thread t = new Thread(() -> work());
    t.start();
    t.join(); // —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –∂–¥—ë—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è t
    ```
    
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –¥–æ–∂–¥–∞—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥—Ä—É–≥–æ–≥–æ –ø–æ—Ç–æ–∫–∞.
    

## 79. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

- **–ß—Ç–æ —ç—Ç–æ:** –º–µ—Ö–∞–Ω–∏–∑–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏.
    
- **–ó–∞—á–µ–º –Ω—É–∂–Ω–∞:** –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç race conditions, –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö.
    
- **–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ** `synchronized`**:**
    
    - –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –±–ª–æ–∫/–º–µ—Ç–æ–¥ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
        
    - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–≤–∏–¥–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π** (memory visibility).
        

**–°–ø–æ—Å–æ–±—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**

- `synchronized` –±–ª–æ–∫–∏ –∏ –º–µ—Ç–æ–¥—ã.
    
- –ö–ª–∞—Å—Å—ã –∏–∑ `java.util.concurrent` (`Lock`, `Semaphore`, `CountDownLatch`, `CyclicBarrier`).
    
- –í–æ–ª–∞—Ç–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`volatile`).
    
- –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–ª–∞—Å—Å—ã (`AtomicInteger`, `AtomicReference`).
    

## 80. –ü–æ –∫–∞–∫–∏–º –æ–±—ä–µ–∫—Ç–∞–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –º–µ—Ç–æ–¥—ã

- **–ù–µ—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ synchronized –º–µ—Ç–æ–¥—ã**
    
    - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–¥—ë—Ç –ø–æ **—ç–∫–∑–µ–º–ø–ª—è—Ä—É –æ–±—ä–µ–∫—Ç–∞ (**`this`**)**.
        
    - –î–≤–∞ –ø–æ—Ç–æ–∫–∞ –º–æ–≥—É—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–∑–Ω—ã–µ synchronized –º–µ—Ç–æ–¥—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞—Ö.
        
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ synchronized –º–µ—Ç–æ–¥—ã**
    
    - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–¥—ë—Ç –ø–æ **–∫–ª–∞—Å—Å—É (**`Class` **–æ–±—ä–µ–∫—Ç)**.
        
    - –û–¥–∏–Ω –º–æ–Ω–∏—Ç–æ—Ä –Ω–∞ –≤–µ—Å—å –∫–ª–∞—Å—Å, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤.
        

## 81. –û—Ç–ª–∏—á–∏—è `synchronized` –æ—Ç `Lock`

|–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞|`synchronized`|`Lock`|
|---|---|---|
|–ü—Ä–æ—Å—Ç–æ—Ç–∞|–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ, –≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ —è–∑—ã–∫|–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å + –∫–ª–∞—Å—Å—ã (`ReentrantLock`)|
|–ì–∏–±–∫–æ—Å—Ç—å|–¢–æ–ª—å–∫–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞|–î–æ–ø. –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: tryLock(), lockInterruptibly(), fair lock|
|–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—Å—Ç—å|–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π release –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –±–ª–æ–∫–∞|–ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é `lock()` –∏ `unlock()`|
|–£—Å–ª–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ|–ù–µ—Ç|–ï—Å—Ç—å (`Condition`)|
|–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å|–ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è|–ë–æ–ª–µ–µ –≥–∏–±–∫–∞—è, –∏–Ω–æ–≥–¥–∞ –±—ã—Å—Ç—Ä–µ–µ|

## 82. –ê–Ω–∞–ª–æ–≥ wait/notify —É Lock

- –î–∞ ‚úÖ.
    
- –£ `Lock` –µ—Å—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º `Condition`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã:
    
    - `await()` ‚Äî –∞–Ω–∞–ª–æ–≥ `wait()`.
        
    - `signal()` ‚Äî –∞–Ω–∞–ª–æ–≥ `notify()`.
        
    - `signalAll()` ‚Äî –∞–Ω–∞–ª–æ–≥ `notifyAll()`.
        

–ü—Ä–∏–º–µ—Ä:

java

```
Lock lock = new ReentrantLock();
Condition condition = lock.newCondition();

lock.lock();
try {
    condition.await(); // –ø–æ—Ç–æ–∫ –∂–¥—ë—Ç
    condition.signal(); // –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ
} finally {
    lock.unlock();
}
```

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞

| –í–æ–ø—Ä–æ—Å               | –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç                                                                          |
| -------------------- | -------------------------------------------------------------------------------------- |
| sleep vs wait        | sleep ‚Äî –ø–∞—É–∑–∞ –±–µ–∑ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∞; wait ‚Äî –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä –∏ –∂–¥—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| join                 | –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥—Ä—É–≥–æ–≥–æ –ø–æ—Ç–æ–∫–∞                                                     |
| –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è        | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ä–µ—Å—É—Ä—Å–∞–º, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ race conditions                         |
| synchronized –º–µ—Ç–æ–¥—ã  | –ù–µ—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ ‚Üí –æ–±—ä–µ–∫—Ç; —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ ‚Üí –∫–ª–∞—Å—Å                                            |
| synchronized vs Lock | Lock –≥–∏–±—á–µ, —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è                                                 |
| –ê–Ω–∞–ª–æ–≥ wait/notify   | –£ Lock –µ—Å—Ç—å `Condition` —Å –º–µ—Ç–æ–¥–∞–º–∏ `await/signal/signalAll`                            |
## 83. –ß—Ç–æ —Ç–∞–∫–æ–µ deadlock? –°—Ö–µ–º–∞

- **Deadlock (–≤–∑–∞–∏–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)** ‚Äî —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –∂–¥—É—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞, –∏ –Ω–∏ –æ–¥–∏–Ω –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É.
    
- –£—Å–ª–æ–≤–∏—è –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è (–ø–æ Coffman):
    
    1. –í–∑–∞–∏–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ (—Ä–µ—Å—É—Ä—Å —Ç–æ–ª—å–∫–æ —É –æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞).
        
    2. –£–¥–µ—Ä–∂–∞–Ω–∏–µ –∏ –æ–∂–∏–¥–∞–Ω–∏–µ (–ø–æ—Ç–æ–∫ –¥–µ—Ä–∂–∏—Ç —Ä–µ—Å—É—Ä—Å –∏ –∂–¥—ë—Ç –¥—Ä—É–≥–æ–π).
        
    3. –ù–µ—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è.
        
    4. –¶–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ.
        

**–°—Ö–µ–º–∞:**

–ö–æ–¥

```
Thread1 ---- –¥–µ—Ä–∂–∏—Ç LockA ---- –∂–¥—ë—Ç LockB
Thread2 ---- –¥–µ—Ä–∂–∏—Ç LockB ---- –∂–¥—ë—Ç LockA
```

## 84. –ü—Ä–∏–º–µ—Ä—ã deadlock

### –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `synchronized`

java

```
class DeadlockExample {
    private final Object lockA = new Object();
    private final Object lockB = new Object();

    public void methodA() {
        synchronized (lockA) {
            System.out.println("Thread A: –¥–µ—Ä–∂–∏—Ç lockA");
            synchronized (lockB) {
                System.out.println("Thread A: –¥–µ—Ä–∂–∏—Ç lockB");
            }
        }
    }

    public void methodB() {
        synchronized (lockB) {
            System.out.println("Thread B: –¥–µ—Ä–∂–∏—Ç lockB");
            synchronized (lockA) {
                System.out.println("Thread B: –¥–µ—Ä–∂–∏—Ç lockA");
            }
        }
    }
}
```

‚Üí –ü–æ—Ç–æ–∫ A –≤—ã–∑—ã–≤–∞–µ—Ç `methodA()`, –ø–æ—Ç–æ–∫ B ‚Äî `methodB()`. –û–±–∞ –∂–¥—É—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞.

### –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `AtomicInteger`

`AtomicInteger` —Å–∞–º –ø–æ —Å–µ–±–µ deadlock –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç (–æ–Ω –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π), –Ω–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é, –≥–¥–µ –ø–æ—Ç–æ–∫–∏ –∂–¥—É—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏:

java

```
AtomicInteger flag = new AtomicInteger(0);

Thread t1 = new Thread(() -> {
    while (flag.get() != 1) { /* –∂–¥—ë–º */ }
    System.out.println("Thread1 –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç");
});

Thread t2 = new Thread(() -> {
    while (flag.get() != 0) { /* –∂–¥—ë–º */ }
    System.out.println("Thread2 –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç");
});
```

‚Üí –ï—Å–ª–∏ –æ–±–∞ –ø–æ—Ç–æ–∫–∞ –∂–¥—É—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è, –Ω–æ –Ω–∏–∫—Ç–æ –Ω–µ –º–µ–Ω—è–µ—Ç `flag`, –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∞—è "–≤–∑–∞–∏–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞".

## 85. Semaphore, CyclicBarrier, CountDownLatch

- **Semaphore**
    
    - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å.
        
    - –ü–æ—Ö–æ–∂ –Ω–∞ Lock, –Ω–æ –¥–æ–ø—É—Å–∫–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π.
        
- **CountDownLatch**
    
    - –ü–æ—Ç–æ–∫–∏ –∂–¥—É—Ç, –ø–æ–∫–∞ —Å—á—ë—Ç—á–∏–∫ –Ω–µ —Å—Ç–∞–Ω–µ—Ç 0.
        
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞–±–æ—Ä–∞ –∑–∞–¥–∞—á.
        
    - –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π (–Ω–µ–ª—å–∑—è —Å–±—Ä–æ—Å–∏—Ç—å).
        
- **CyclicBarrier**
    
    - –ü–æ—Ç–æ–∫–∏ –∂–¥—É—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞, –ø–æ–∫–∞ –≤—Å–µ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –±–∞—Ä—å–µ—Ä–∞.
        
    - –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –±–∞—Ä—å–µ—Ä —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞.
        

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Lock:**

- Lock —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ä–µ—Å—É—Ä—Å—É (—ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ).
    
- Semaphore ‚Äî –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É.
    
- CountDownLatch ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ —Å–æ–±—ã—Ç–∏—é.
    
- CyclicBarrier ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä—É–ø–ø—ã –ø–æ—Ç–æ–∫–æ–≤.
    

## 86. volatile –∏ `java.util.concurrent.atomic`

- **volatile**
    
    - –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏.
        
    - –ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `count++`).
        
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–ª–∞–≥–æ–≤, —Å–æ—Å—Ç–æ—è–Ω–∏–π.
        
- **–ö–ª–∞—Å—Å—ã** `java.util.concurrent.atomic`
    
    - –û–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (CAS ‚Äî compare-and-swap).
        
    - –ü—Ä–∏–º–µ—Ä—ã:
        
        - `AtomicInteger`, `AtomicLong` ‚Äî –∞—Ç–æ–º–∞—Ä–Ω—ã–µ —Å—á—ë—Ç—á–∏–∫–∏.
            
        - `AtomicReference` ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–∞—è —Å—Å—ã–ª–∫–∞.
            
        - `AtomicBoolean`.
            
        - `AtomicStampedReference` ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å –≤–µ—Ä—Å–∏–µ–π (—Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É ABA).
            

## 87. –ó–∞–¥–∞—á–∞: –º–∞—Å—Å–∏–≤ –∏–∑ N —ç–ª–µ–º–µ–Ω—Ç–æ–≤, N –ø–æ—Ç–æ–∫–æ–≤

–ü—Ä–∏–º–µ—Ä —Ä–µ—à–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `ExecutorService`:

java

```
import java.util.concurrent.*;

public class ArrayProcessing {
    public static void main(String[] args) throws InterruptedException {
        int[] arr = {1, 2, 3, 4, 5};
        int n = arr.length;

        ExecutorService pool = Executors.newFixedThreadPool(n);
        CountDownLatch latch = new CountDownLatch(n);

        for (int i = 0; i < n; i++) {
            final int index = i;
            pool.submit(() -> {
                arr[index] = process(arr[index]); // –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–∏—Å–ª–∞
                latch.countDown();
            });
        }

        latch.await(); // –∂–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤
        pool.shutdown();

        for (int x : arr) {
            System.out.println(x);
        }
    }

    static int process(int x) {
        return x * x; // –ø—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏: –≤–æ–∑–≤–µ–¥–µ–Ω–∏–µ –≤ –∫–≤–∞–¥—Ä–∞—Ç
    }
}
```

‚Üí –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å–≤–æ–∏–º –ø–æ—Ç–æ–∫–æ–º, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–∞—Å—Å–∏–≤.

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞

| –í–æ–ø—Ä–æ—Å         | –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç                                                     |
| -------------- | ----------------------------------------------------------------- |
| Deadlock       | –í–∑–∞–∏–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Ç–æ–∫–æ–≤ –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤                 |
| –ü—Ä–∏–º–µ—Ä         | synchronized (LockA/LockB), AtomicInteger (–ª–æ–≥–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞) |
| Semaphore      | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å—É                                     |
| CountDownLatch | –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞–±–æ—Ä–∞ –∑–∞–¥–∞—á                                  |
| CyclicBarrier  | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä—É–ø–ø—ã –ø–æ—Ç–æ–∫–æ–≤                                      |
| volatile       | –í–∏–¥–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π, –Ω–µ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å                               |
| Atomic         | –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫                                 |
| –ó–∞–¥–∞—á–∞         | N –ø–æ—Ç–æ–∫–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –º–∞—Å—Å–∏–≤, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ       |